<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: main.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: main.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Selects a random number between 1 and 10
 * 
 * @returns int
 */
function rollDie () {
  return Math.ceil(Math.random() * 10)
}

/**
 * Constructor for Pool object
 * 
 * @param int     dices
 * @param Array   arr
 */
Pool = function(){
  this.dices = 0
  this.weak = false
  this.rerollOn = 10

  if (typeof arguments[0] === "number") {
    this.dices = parseInt(arguments[0], 10)
  }
  if (typeof arguments[0] === "object") {
    var config = arguments[0]

    this.dices    = config.dices || this.dices
    this.weak     = config.weak || this.weak
    this.rerollOn = config.rerollOn || this.rerollOn
  }
};

/**
 * Adds the passed integer of dices to the current number in the Pool
 * 
 * @param int     dices
 * @returns int
 */
Pool.prototype.addDice = function (dices) {
  this.dices = this.dices + parseInt(dices, 10)

  return this;
};

/**
 * Removes the passed integer of dices from the current number in the Pool
 * 
 * @param int     dices
 * @returns int
 */
Pool.prototype.removeDice = function (dices) {
  this.dices = this.dices - parseInt(dices, 10)

  return this;
};

/**
 * Penalizes the passed integer of dices on the current Pool
 * 
 * @param int     penalty
 * @returns int
 */
Pool.prototype.penalty = function (penalty) {
  return this.removeDice(penalty)
};

/**
 * Makes the current Pool weak
 * 
 * @returns boolean
 */
Pool.prototype.isWeak = function () {
  this.weak = true

  return this;
};

/**
 * Resets the reroll threshold for current Pool
 * 
 * @param int     threshold
 * @returns int
 */
Pool.prototype.reroll = function (threshold) {
  this.rerollOn = parseInt(threshold, 10)

  return this;
};

/**
 * Asks if there are no dices left for the 'Chance roll'
 * 
 * @returns boolean
 */
Pool.prototype.isChanceRoll = function () {
  return (this.dices &lt; 1)
}

/**
 * Game logic
 * 
 * @returns int
 */
Pool.prototype.roll = function () {
  var successes = 0,
      roll;

  if (this.isChanceRoll()) {
    while (true) {
      roll = rollDie()

      if (roll === 10) {
        successes++
      } else if(roll === 1) {
        successes--
      }
      if (this.weak || roll &lt; 10) {
        break
      }
    }
  } else {
    for (var i = 0; i &lt; this.dices; i++) {
      roll = rollDie()

      if (roll >= 8) {
        successes++
      }
      if (!this.weak &amp;&amp; roll >= this.rerollOn) {
        this.dices++
      }
      if (this.weak &amp;&amp; roll === 1) {
        successes--
      }
    }
  }

  return (this.isChanceRoll()) ? successes : Math.max(0, successes);
};

exports.Pool = Pool;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Pool">Pool</a></li><li><a href="global.html#rollDie">rollDie</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Tue Jan 19 2016 18:56:19 GMT-0800 (Pacific Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
